åœ¨ ag-Grid ä¸­ä½¿ç”¨ `headerComponent` è‡ªå®šä¹‰è¡¨å¤´ç»„ä»¶ï¼Œå¯ä»¥è®©ä½ å®Œå…¨æ§åˆ¶è¡¨å¤´çš„æ˜¾ç¤ºå’Œäº¤äº’ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„é…ç½®æ–¹æ³•ï¼š

## 1. åˆ›å»ºè‡ªå®šä¹‰ Header ç»„ä»¶

### React ç¤ºä¾‹
```jsx
// CustomHeader.jsx
import React from 'react';

const CustomHeader = (props) => {
  const [sortState, setSortState] = React.useState('none');
  
  const handleSort = () => {
    const order = sortState === 'none' ? 'asc' : sortState === 'asc' ? 'desc' : 'none';
    setSortState(order);
    
    if (order === 'none') {
      props.column.removeSort();
    } else {
      props.column.setSort(order);
    }
  };

  const handleFilter = () => {
    // è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘
  };

  return (
    <div style={{ 
      display: 'flex', 
      alignItems: 'center',
      justifyContent: 'space-between',
      width: '100%',
      padding: '0 10px'
    }}>
      <span style={{ fontWeight: 'bold' }}>
        {props.displayName}
      </span>
      <div>
        <button onClick={handleSort} style={{ marginRight: 5 }}>
          {sortState === 'asc' ? 'â†‘' : sortState === 'desc' ? 'â†“' : 'â†•'}
        </button>
        <button onClick={handleFilter}>ğŸ”</button>
      </div>
    </div>
  );
};

export default CustomHeader;
```

### Angular ç¤ºä¾‹
```typescript
// custom-header.component.ts
import { Component } from '@angular/core';
import { IHeaderAngularComp } from 'ag-grid-angular';
import { IHeaderParams } from 'ag-grid-community';

@Component({
  selector: 'app-custom-header',
  template: `
    <div class="custom-header">
      <span class="header-label">{{ params.displayName }}</span>
      <div class="header-actions">
        <button (click)="onSortRequested('asc')" [class.active]="isAsc">â†‘</button>
        <button (click)="onSortRequested('desc')" [class.active]="isDesc">â†“</button>
        <button (click)="onMenuClick($event)">â˜°</button>
      </div>
    </div>
  `,
  styles: [`
    .custom-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      height: 100%;
    }
    .header-actions button {
      margin-left: 5px;
      border: none;
      background: none;
      cursor: pointer;
    }
    .header-actions button.active {
      color: blue;
      font-weight: bold;
    }
  `]
})
export class CustomHeaderComponent implements IHeaderAngularComp {
  public params: IHeaderParams;
  public isAsc = false;
  public isDesc = false;

  agInit(params: IHeaderParams): void {
    this.params = params;
    this.params.column.addEventListener('sortChanged', this.onSortChanged.bind(this));
  }

  onSortRequested(order: 'asc' | 'desc'): void {
    this.params.setSort(order);
  }

  onSortChanged(): void {
    this.isAsc = this.params.column.isSortAscending();
    this.isDesc = this.params.column.isSortDescending();
  }

  onMenuClick(event: MouseEvent): void {
    this.params.showColumnMenu(event.target as HTMLElement);
  }

  refresh(params: IHeaderParams): boolean {
    return false;
  }
}
```

## 2. æ³¨å†Œå’Œä½¿ç”¨ Header ç»„ä»¶

### React ä¸­é…ç½®
```jsx
import React from 'react';
import { AgGridReact } from 'ag-grid-react';
import CustomHeader from './CustomHeader';

const GridExample = () => {
  const columnDefs = [
    {
      field: 'name',
      headerName: 'å§“å',
      headerComponent: CustomHeader,
      headerComponentParams: {
        // è‡ªå®šä¹‰å‚æ•°
        menuIcon: 'fa-bars',
        showFilter: true
      }
    },
    {
      field: 'age',
      headerName: 'å¹´é¾„',
      headerComponent: CustomHeader
    },
    // å…¶ä»–åˆ—...
  ];

  return (
    <div className="ag-theme-alpine" style={{ height: 400 }}>
      <AgGridReact
        columnDefs={columnDefs}
        rowData={rowData}
        components={{ CustomHeader }}
      />
    </div>
  );
};
```

### Angular ä¸­é…ç½®
```typescript
// app.module.ts
import { AgGridModule } from 'ag-grid-angular';
import { CustomHeaderComponent } from './custom-header.component';

@NgModule({
  declarations: [CustomHeaderComponent],
  imports: [
    AgGridModule.withComponents([CustomHeaderComponent])
  ]
})
export class AppModule { }

// app.component.ts
columnDefs = [
  {
    field: 'name',
    headerName: 'å§“å',
    headerComponent: CustomHeaderComponent,
    headerComponentParams: {
      customParam: 'è‡ªå®šä¹‰å€¼'
    }
  }
];
```

## 3. Header ç»„ä»¶çš„å‚æ•°å’Œæ–¹æ³•

### å¸¸ç”¨å‚æ•° (props.params)
```javascript
{
  column: Column,           // å½“å‰åˆ—å¯¹è±¡
  displayName: string,      // æ˜¾ç¤ºåç§°
  enableSorting: boolean,   // æ˜¯å¦å¯ç”¨æ’åº
  enableMenu: boolean,      // æ˜¯å¦å¯ç”¨èœå•
  showColumnMenu: Function, // æ˜¾ç¤ºåˆ—èœå•çš„æ–¹æ³•
  setSort: Function,        // è®¾ç½®æ’åº
  progressSort: Function,   // åˆ‡æ¢æ’åºçŠ¶æ€
  api: GridApi,            // Grid API
  columnApi: ColumnApi,    // Column API
  context: any,            // ä¸Šä¸‹æ–‡
  ...headerComponentParams // è‡ªå®šä¹‰å‚æ•°
}
```

### å¸¸ç”¨æ–¹æ³•
```javascript
// æ’åºç›¸å…³
props.column.setSort('asc' | 'desc' | null);
props.column.isSortAscending();
props.column.isSortDescending();

// èœå•ç›¸å…³
props.showColumnMenu(buttonElement);

// åˆ—ç›¸å…³
props.column.isVisible();
props.column.setVisible(true/false);
props.column.getColId();
```

## 4. é«˜çº§åŠŸèƒ½ç¤ºä¾‹

### å¸¦æœç´¢æ¡†çš„ Header
```jsx
const SearchableHeader = (props) => {
  const [searchText, setSearchText] = React.useState('');

  const handleSearch = (value) => {
    setSearchText(value);
    const filterInstance = props.api.getFilterInstance(props.column.colId);
    filterInstance.setModel({
      type: 'contains',
      filter: value
    });
    props.api.onFilterChanged();
  };

  return (
    <div style={{ padding: '5px' }}>
      <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>
        {props.displayName}
      </div>
      <input
        type="text"
        value={searchText}
        onChange={(e) => handleSearch(e.target.value)}
        placeholder="æœç´¢..."
        style={{ width: '100%', padding: '2px' }}
      />
    </div>
  );
};
```

### å¸¦ä¸‹æ‹‰ç­›é€‰çš„ Header
```jsx
const DropdownFilterHeader = (props) => {
  const options = ['å…¨éƒ¨', 'é€‰é¡¹1', 'é€‰é¡¹2', 'é€‰é¡¹3'];
  const [selected, setSelected] = React.useState('å…¨éƒ¨');

  const handleChange = (value) => {
    setSelected(value);
    if (value === 'å…¨éƒ¨') {
      props.api.setFilterModel(null);
    } else {
      const filterInstance = props.api.getFilterInstance(props.column.colId);
      filterInstance.setModel({
        type: 'equals',
        filter: value
      });
    }
    props.api.onFilterChanged();
  };

  return (
    <div>
      <div>{props.displayName}</div>
      <select 
        value={selected} 
        onChange={(e) => handleChange(e.target.value)}
        style={{ width: '100%', marginTop: '5px' }}
      >
        {options.map(opt => (
          <option key={opt} value={opt}>{opt}</option>
        ))}
      </select>
    </div>
  );
};
```

## 5. æ ·å¼è‡ªå®šä¹‰æŠ€å·§

```css
/* è‡ªå®šä¹‰ Header æ ·å¼ */
.ag-header-cell {
  /* è¦†ç›–é»˜è®¤æ ·å¼ */
}

.custom-header {
  /* è‡ªå®šä¹‰æ ·å¼ */
}

/* ä½¿ç”¨ CSS å˜é‡ */
:root {
  --header-bg-color: #f8f9fa;
  --header-text-color: #333;
}

.custom-header {
  background: var(--header-bg-color);
  color: var(--header-text-color);
}
```

## æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤æ‚çš„ Header ç»„ä»¶å¯èƒ½å½±å“æ€§èƒ½ï¼Œå°½é‡ä¿æŒç®€å•
2. **å“åº”å¼è®¾è®¡**ï¼šç¡®ä¿ Header ç»„ä»¶åœ¨ä¸åŒå°ºå¯¸ä¸‹æ­£å¸¸æ˜¾ç¤º
3. **äº‹ä»¶å¤„ç†**ï¼šæ­£ç¡®å¤„ç†äº‹ä»¶å†’æ³¡ï¼Œé¿å…å½±å“ Grid çš„é»˜è®¤è¡Œä¸º
4. **æ¡†æ¶å…¼å®¹**ï¼šç¡®ä¿ç»„ä»¶ä¸ ag-Grid ç‰ˆæœ¬å…¼å®¹
5. **TypeScript ç±»å‹**ï¼šä¸ºç»„ä»¶æä¾›æ­£ç¡®çš„ç±»å‹å®šä¹‰

é€šè¿‡è‡ªå®šä¹‰ Header ç»„ä»¶ï¼Œä½ å¯ä»¥å®ç°å„ç§å¤æ‚çš„è¡¨å¤´åŠŸèƒ½ï¼Œå¦‚å†…è”ç­›é€‰ã€è‡ªå®šä¹‰æ“ä½œæŒ‰é’®ã€çŠ¶æ€æŒ‡ç¤ºå™¨ç­‰ã€‚
